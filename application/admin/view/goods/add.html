    <fieldset class="layui-elem-field layui-field-title">
        <legend>商品添加</legend>
    </fieldset>
    <form class="layui-form layui-form-pane" method="post" action="{:url('add')}">
        <div class="layui-form-item layui-form-text space-250" style="position: absolute;">
            <div class="space-250 layui-inline">
                <label class="layui-form-label space-250"><span class="field-tip">*</span>主图</label>
                <div class="layui-input-block space-250" pane auto>
                    <img src="http://temp.im/754x754" style="height:250px;width:250px;" alt="">
                    <div class="site-demo-upbar">
                        <input type="hidden" name="diagram">
                        <input type="file" name="file" class="layui-upload-file-image">
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-form-item" style="margin-left: 290px;">
            <label class="layui-form-label"><span class="field-tip">*</span>商品名称</label>
            <div class="layui-input-block space-600">
                <input type="text" name="data[name]" lay-verify="former_name" autocomplete="off" placeholder="商品名称" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item" style="margin-left: 290px;">
            <label class="layui-form-label"><span class="field-tip">*</span>商品分类</label>
            <div class="layui-input-inline">
                <select name="" class="layui-select">
                    {volist name="categoryList" id="vo"}
                    <option value="{$vo.id}">{:str_repeat('--',$vo['level'])}{$vo.name}</option>
                    {/volist}
                </select>
            </div>
            <label class="layui-form-label"><span class="field-tip">*</span>商品重量</label>
            <div class="layui-input-inline">
                <input type="text" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux">单位：千克</div>
        </div>
        <div class="layui-form-item" style="margin-left: 290px;">
            <label class="layui-form-label">推荐类型</label>
            <div class="layui-input-block space-600">
                <input type="checkbox" title="新品">
                <input type="checkbox" title="热门">
                <input type="checkbox" title="推荐">
                <input type="checkbox" title="促销">
                <input type="checkbox" title="包邮">
            </div>
        </div>

        <div class="layui-form-item" style="margin-left: 290px;">
            <label class="layui-form-label">商场价</label>
            <div class="layui-input-inline space-600">
                <input type="text" class="layui-input">
            </div>
            <label class="layui-form-label">商城价</label>
            <div class="layui-input-inline space-600">
                <input type="text" class="layui-input">
            </div>
        </div>
        <div class="layui-form-item" style="margin-left: 290px;">
            <label class="layui-form-label">商品上架</label>
            <div class="layui-input-inline space-600">
                <input type="checkbox" title="上架">
            </div>
            <label class="layui-form-label">商品库存</label>
            <div class="layui-input-inline space-600">
                <input type="text" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item" style="margin-left: 290px;">
            <label class="layui-form-label">商品模型</label>
            <div class="layui-input-inline">
                <select name="" class="layui-select" lay-filter="model">
                    <option value="0">不使用模型</option>
                    {volist name="formerList" id="vo"}
                    <option value="{$vo.id}">{$vo.name}</option>
                    {/volist}
                </select>
            </div>
            <a class="layui-btn layui-btn-primary layui-btn-disabled" data-iframe data-url lay-spec>选择规格</a>
        </div>
        
        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label space-1000">商品详情</label>
            <div class="layui-input-block space-1000">
              <textarea class="layui-textarea layui-hide" id="goods_editor"></textarea>
            </div>
        </div>
        <div class="layui-form-item">
            <a class="layui-btn" lay-submit="" lay-filter="save">保存</a>
        </div>
    </form>

<script type="text/html" id="goods_spec">
<div class="layui-form-item" id="form-goods-spec">
    <div class="layui-form-header">
        {{#  layui.each(d.title, function(k, item){ }}
        <label class="layui-form-label">{{ item }}</label>
        {{#  }); }}
        <label class="layui-form-label">重量</label>
        <label class="layui-form-label">库存</label>
        <label class="layui-form-label">价格</label>
    </div>
    {{#  layui.each(d.specs, function(index, items){ }}
    <div class="layui-form-body">
        {{#  layui.each(d.specs[index], function(i, item){ }}
        <label class="layui-form-label" id="{{d.title[i]}}-{{item}}">{{item}}</label>
        {{#  }); }}
        <div class="layui-input-inline">
            <input type="text" class="layui-input">
        </div>
        <div class="layui-input-inline">
            <input type="text" class="layui-input">
        </div>
        <div class="layui-input-inline">
            <input type="text" class="layui-input">
        </div>
        <div class="layui-input-inline" style="margin-left: 10px;">
            <a class="layui-btn layui-btn-primary layui-btn-mini">
                <i class="layui-icon">&#xe640;</i>
            </a>
        </div>
    </div>
    {{#  }); }}
</div>
</script>
<script type="text/html" id="body_goods_spec">
<div class="layui-form-body">
    {{#  layui.each(d.spec, function(i, item){ }}
    <label class="layui-form-label" id="{{d.title[i]}}-{{item}}">{{item}}</label>
    {{#  }); }}
    <div class="layui-input-inline">
        <input type="text" class="layui-input">
    </div>
    <div class="layui-input-inline">
        <input type="text" class="layui-input">
    </div>
    <div class="layui-input-inline">
        <input type="text" class="layui-input">
    </div>
    <div class="layui-input-inline" style="margin-left: 10px;">
        <a class="layui-btn layui-btn-primary layui-btn-mini">
            <i class="layui-icon">&#xe640;</i>
        </a>
    </div>
</div>
</script>
<script type="text/javascript">
layui.use(['layedit','laytpl','jquery','descartesUtils','form'], function(){
  var   $ = layui.jquery,
        layedit = layui.layedit,
        descartesUtils = layui.descartesUtils,
        laytpl = layui.laytpl,
        form = layui.form();



    form.on('select(model)', function(data){
        if(data.value > 0){
            $('[lay-spec]').data('url','/admin/former/iframe/id/'+data.value);
        }else{
            $('[lay-spec]').data('url',false);
        }
    });
  
  /**
   * 创建一个编辑器
   * @True {[type]}
   */
  var editIndex = layedit.build('goods_editor',{
    'uploadImage':{
        'url':'/admin/index/upload',
        'type':'post'
    }
  });

  /**
   * 删除一栏商品规格
   * @method
   * @DateTime 2017-04-28T15:43:25+0800
   * @param    {[type]}                 event){                 event.preventDefault();    $(this).parent().parent().remove();    if($('#form-goods-spec .layui-form-body').length [description]
   * @return   {[type]}                          [description]
   */
  $(document).on('click','.layui-form-item .layui-form-body > .layui-input-inline .layui-btn-mini',function(event){
    event.preventDefault();
    $(this).parent().parent().remove();
    if($('#form-goods-spec .layui-form-body').length == 0){
        $('#form-goods-spec').remove();
        $('[lay-spec]').data('params','');
    }
  });
});
</script>